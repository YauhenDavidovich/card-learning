(this["webpackJsonpcard-learning"]=this["webpackJsonpcard-learning"]||[]).push([[0],{135:function(e,t,n){},141:function(e,t,n){},162:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(27),i=n.n(s),c=(n(135),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,218)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),s(e),i(e)}))}),o=n(25),l=n(18),d=(n(141),n(210)),j=n(12),u=n(44),b=n.n(u),m=b.a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),h=function(e){return m.post("/auth/login",e)},O=function(){return m.delete("/auth/me")},p={email:"",login:"",idUser:"",isAuth:!1,user:{_id:"",email:"",name:"",avatar:"",publicCardPacksCount:0,created:new Date,updated:new Date,isAdmin:!1,verified:!1,rememberMe:!1,error:""}},x="card-learning/login/LOG-IN",f="card-learning/login/LOG-OUT",g="card-learning/login/SET-USER",w=function(e){return{type:g,data:e}},y=function(e){return function(t){h(e).then((function(e){var n,r;t((n=e.data.email,r=e.data._id,{type:x,email:n,_id:r,isAuth:!0})),t(w(e.data))})).catch((function(e){}))}},v=function(){return function(e){O().then((function(t){e({type:f,email:"",_id:"",isAuth:!1}),e(w(t.data))}))}},S=n(2),P=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.login.isAuth}));return Object(S.jsxs)("div",{className:"header",children:[Object(S.jsx)(o.c,{to:"/login",children:"Login"}),Object(S.jsx)(o.c,{to:"/forgot-password",children:"Forgot Password"}),Object(S.jsx)(o.c,{to:"/recovery-password",children:"Recovery Password"}),Object(S.jsx)(o.c,{to:"/profile",children:"Profile"}),Object(S.jsx)(o.c,{to:"/registration",children:"Registration"}),t&&Object(S.jsx)(d.a,{color:"inherit",onClick:function(){e(v())},children:"Logout"})]})},C=n(13),k=n(15),A=n(45),E=b.a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),I=function(e){return E.post("auth/forgot",e)},R=function(e){return E.post("auth/set-new-password",e)},N={IsRequestNewPasswordSent:!1,message:null},T="card-learning/forgot/IS_REQUEST_NEW_PASSWORD_SENT",F="card-learning/forgot/SET_MESSAGE",_=function(e){return{type:F,message:e}},D=function(e,t,n){return function(r){I({email:e,from:t,message:n}).then((function(e){e.data.success?(r({type:T,IsRequestNewPasswordSent:!0}),r(_("Check your email please"))):r(_("Something went wrong"))})).catch((function(e){r(_(e.message?e.message:"Network error occurred!"))}))}},L=n(201),B=n(209),U=n(211),Z=n(216),q=n(203),W=n(207),G=a.a.memo((function(){var e=Object(l.c)((function(e){return e.forgot.IsRequestNewPasswordSent})),t=Object(l.c)((function(e){return e.forgot.message})),n=Object(l.b)(),a=Object(r.useState)(""),s=Object(k.a)(a,2),i=s[0],c=s[1],o=Object(C.g)(),u=Object(A.a)({initialValues:{email:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Please type your email!",t},onSubmit:function(e){n(D(e.email,"davidovich336@gmail.com",'<div style="background-color: lime; padding: 15px">\n            password recovery link:\n            <a href="http://localhost:3000/recovery-password/$token$">link</a> \n          </div>')),c("/check-email/"+e.email),u.resetForm()}});return e?Object(S.jsx)(C.a,{to:i}):Object(S.jsx)("div",{className:"main",children:Object(S.jsx)("div",{className:"mainBlock",children:Object(S.jsx)(L.a,{container:!0,justifyContent:"center",children:Object(S.jsx)(L.a,{item:!0,justifyContent:"center",children:Object(S.jsx)("form",{onSubmit:u.handleSubmit,children:Object(S.jsxs)(U.a,{children:[Object(S.jsx)(q.a,{children:Object(S.jsx)(B.a,{component:"span",sx:{marginTop:"20px",marginBottom:"10px"},children:Object(S.jsx)("h2",{style:{textAlign:"center"},children:"Forgot your password?"})})}),Object(S.jsx)(Z.a,{children:Object(S.jsxs)(L.a,{container:!0,justifyContent:"space-between",direction:"column",alignItems:"center",children:[Object(S.jsx)(W.a,Object(j.a)({type:"email",label:"Email",margin:"normal",color:"primary",placeholder:"Email"},u.getFieldProps("email"))),u.touched.email&&u.errors.email&&Object(S.jsx)("div",{style:{color:"red"},children:u.errors.email}),t&&Object(S.jsx)("div",{style:{color:"red"},children:t}),Object(S.jsx)(L.a,{container:!0,justifyContent:"center",children:Object(S.jsx)(L.a,{item:!0,justifyContent:"center",children:Object(S.jsx)("h4",{children:"Enter your email address and we will send you further instructions"})})}),Object(S.jsx)(d.a,{variant:"contained",color:"primary",type:"submit",children:"Send Instructions"}),Object(S.jsx)(B.a,{children:Object(S.jsx)("h4",{children:"Did you remember your password?"})}),Object(S.jsx)(d.a,{variant:"contained",color:"secondary",onClick:function(){o("/login")},children:"Try logging in"})]})})]})})})})})})})),M=n(212),z=n(217),$=function(){var e=Object(C.g)(),t=Object(l.b)(),n=Object(l.c)((function(e){return e.login.isAuth})),r=Object(A.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="required fill",e.password||(t.password="password must have"),t},onSubmit:function(e){t(y(e))}});return n?Object(S.jsx)(C.a,{to:"/profile"}):Object(S.jsx)("div",{className:"main",children:Object(S.jsx)("div",{className:"mainBlock",children:Object(S.jsx)(M.a,{container:!0,justifyContent:"center",children:Object(S.jsx)(M.a,{item:!0,justifyContent:"center",children:Object(S.jsx)("form",{onSubmit:r.handleSubmit,children:Object(S.jsxs)(U.a,{children:[Object(S.jsx)(q.a,{children:Object(S.jsx)("h2",{style:{padding:"20px"},children:"SIGN-IN"})}),Object(S.jsx)(Z.a,{children:Object(S.jsxs)(M.a,{container:!0,justifyContent:"center",direction:"column",children:[Object(S.jsx)(W.a,Object(j.a)(Object(j.a)({label:"Email",margin:"normal"},r.getFieldProps("email")),{},{value:r.values.email,onChange:r.handleChange,onBlur:r.handleBlur})),r.touched.email&&r.errors.email?Object(S.jsx)("div",{style:{color:"red"},children:r.errors.email}):null,Object(S.jsx)(W.a,Object(j.a)(Object(j.a)({type:"password",label:"Password",margin:"normal"},r.getFieldProps("password")),{},{value:r.values.password,onChange:r.handleChange,onBlur:r.handleBlur})),r.touched.password&&r.errors.password?Object(S.jsx)("div",{style:{color:"red"},children:r.errors.password}):null,Object(S.jsx)(z.a,{component:o.b,to:"/forgot-password",color:"secondary",children:"Forgot Password"}),Object(S.jsx)(d.a,{color:"primary",type:"submit",variant:"contained",children:"Login"}),Object(S.jsx)("div",{children:" Don`t have an account?"}),Object(S.jsx)(d.a,{onClick:function(){e("/registration")},variant:"contained",color:"secondary",children:"Sign Up"})]})})]})})})})})})},V=b.a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),J=function(){return V.post("auth/me")},Q={status:"idle",isInitialized:!1},H=n(215),K=function(){var e=Object(l.c)((function(e){return e.login.user})),t=Object(l.b)(),n=Object(l.c)((function(e){return e.app.isInitialized})),a=Object(l.c)((function(e){return e.login.isAuth})),s=Object(C.g)();return Object(r.useEffect)((function(){t((function(e){J().then((function(e){})).catch((function(){})).finally((function(){e({type:"APP/INITIALAZE",isInitialazed:!0})}))})),a||s("/login")}),[a]),n?Object(S.jsxs)("div",{children:[" ",e?Object(S.jsxs)("div",{children:[Object(S.jsx)("img",{src:e.avatar}),e.name]}):""]}):Object(S.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(S.jsx)(H.a,{})})},X={isNewPasswordSet:!1,message:null},Y="card-learning/newPassword/SET_NEW_PASSWORD",ee="card-learning/newPassword/SET_MESSAGE",te=function(e){return{type:ee,message:e}},ne=n(205),re=a.a.memo((function(){var e=Object(l.c)((function(e){return e.newPassword.isNewPasswordSet})),t=Object(l.c)((function(e){return e.newPassword.message})),n=Object(l.b)(),r=Object(C.h)().token,a=Object(A.a)({initialValues:{password:""},validate:function(e){var t={};return e.password?e.password.length<8&&(t.password="Must be 8 characters or more"):t.password="Please type new password",t},onSubmit:function(e){var t,s;n((t=e.password,s=r,function(e){R({password:t,resetPasswordToken:s}).then((function(t){t.data.info?e({type:"card-learning/newPassword/SET_NEW_PASSWORD",isPasswordSet:!0}):t.data.error?e(te(t.data.error)):e(te("Some error occurred!"))})).catch((function(t){e(te(t.message?t.message:"Network error occurred!"))}))})),a.resetForm()}});return e?Object(S.jsx)(C.a,{to:"/login"}):Object(S.jsx)("div",{className:"main",children:Object(S.jsx)(ne.a,{maxWidth:"sm",style:{background:"#F9F9FE",height:"50vh",borderRadius:"8px"},children:Object(S.jsx)(L.a,{container:!0,spacing:3,children:Object(S.jsx)(L.a,{item:!0,style:{marginTop:"20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:Object(S.jsxs)("form",{onSubmit:a.handleSubmit,style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(S.jsx)(B.a,{component:"span",sx:{marginTop:"20px",marginBottom:"20px"},children:Object(S.jsx)("h2",{style:{textAlign:"center"},children:"Create new password"})}),Object(S.jsxs)(B.a,{component:"span",display:"block",children:[Object(S.jsx)(W.a,Object(j.a)({variant:"outlined",style:{marginTop:"20px",width:"100%"},id:"outlined-basic",type:"password",color:"primary",placeholder:"password"},a.getFieldProps("password"))),a.touched.password&&a.errors.password&&Object(S.jsx)("div",{style:{color:"red"},children:a.errors.password}),t&&Object(S.jsx)("div",{style:{color:"red"},children:t})]}),Object(S.jsx)(B.a,{children:Object(S.jsx)("h4",{children:"Create new password and we will send you further instructions to email"})}),Object(S.jsx)(d.a,{variant:"contained",color:"primary",type:"submit",style:{borderRadius:"30px",background:"#73926C",marginTop:"30px",alignSelf:"center",boxShadow:"0px 4px 18px rgba(33, 38, 143, 0.35), inset 0px 1px 0px rgba(255, 255, 255, 0.3)"},children:"Create new password"})]})})})})})})),ae=b.a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),se=function(e,t){return ae.post("auth/register",{email:e,password:t})},ie={isRegistered:!1},ce=function(){var e=Object(l.b)(),t=Object(A.a)({initialValues:{email:"",password:"",confirmPassword:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<3&&(t.password="Password must be more than two characters"):t.password="Required",e.confirmPassword?e.confirmPassword!==e.password&&(t.confirmPassword="Passwords must match"):t.confirmPassword="Required",t},onSubmit:function(n){var r,a;e((r=n.email,a=n.password,function(e){se(r,a).then((function(t){e({type:"REGISTERED",isRegistered:!0})})).catch((function(e){alert("This email is already registered")}))})),t.resetForm()}});return Object(S.jsx)("div",{className:"main",children:Object(S.jsx)("div",{className:"mainBlock",children:Object(S.jsx)(L.a,{container:!0,justifyContent:"center",children:Object(S.jsx)(L.a,{item:!0,justifyContent:"center",children:Object(S.jsx)("form",{onSubmit:t.handleSubmit,children:Object(S.jsxs)(U.a,{children:[Object(S.jsx)(q.a,{children:Object(S.jsx)(L.a,{container:!0,justifyContent:"center",children:Object(S.jsxs)(L.a,{item:!0,justifyContent:"center",children:[Object(S.jsx)("h1",{children:"It-incubator"}),Object(S.jsx)(L.a,{container:!0,justifyContent:"center",children:Object(S.jsx)(L.a,{item:!0,justifyContent:"center",children:Object(S.jsx)("h3",{children:"Sign up"})})})]})})}),Object(S.jsxs)(Z.a,{children:[Object(S.jsx)(W.a,Object(j.a)({label:"Email",margin:"normal"},t.getFieldProps("email"))),t.touched.email&&t.errors.email&&Object(S.jsx)("div",{style:{color:"red"},children:t.errors.email}),Object(S.jsx)(W.a,Object(j.a)({type:"password",label:"Password",margin:"normal"},t.getFieldProps("password"))),t.touched.password&&t.errors.password&&Object(S.jsx)("div",{style:{color:"red"},children:t.errors.password}),Object(S.jsx)(W.a,Object(j.a)({type:"password",label:"Confirm password",margin:"normal"},t.getFieldProps("confirmPassword"))),t.touched.confirmPassword&&t.errors.confirmPassword&&Object(S.jsx)("div",{style:{color:"red"},children:t.errors.confirmPassword}),Object(S.jsx)(B.a,{children:Object(S.jsxs)(L.a,{container:!0,justifyContent:"space-between",children:[Object(S.jsx)(d.a,{onClick:function(){t.resetForm()},variant:"contained",color:"secondary",children:"Cancel"}),Object(S.jsx)(d.a,{type:"submit",variant:"contained",color:"primary",children:"Register"})]})})]})]})})})})})})},oe=function(){return Object(S.jsx)("div",{className:"main",children:"Page not found"})},le=function(){var e=Object(C.h)().email;return Object(S.jsx)("div",{className:"main",children:Object(S.jsx)(ne.a,{maxWidth:"sm",style:{background:"#F9F9FE",height:"50vh",borderRadius:"8px"},children:Object(S.jsx)(L.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:3,children:Object(S.jsxs)(L.a,{item:!0,style:{marginTop:"20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(S.jsx)(B.a,{component:"span",sx:{marginTop:"20px",marginBottom:"20px"},children:Object(S.jsx)("h2",{style:{textAlign:"center"},children:"Check Email"})}),Object(S.jsx)(B.a,{children:Object(S.jsxs)("h4",{children:["We\u2019ve sent an Email with instructions to ",e]})})]})})})})},de=function(){return Object(S.jsxs)(C.d,{children:[Object(S.jsx)(C.b,{path:"/login",element:Object(S.jsx)($,{})}),Object(S.jsx)(C.b,{path:"/forgot-password",element:Object(S.jsx)(G,{})}),Object(S.jsx)(C.b,{path:"/profile",element:Object(S.jsx)(K,{})}),Object(S.jsx)(C.b,{path:"/recovery-password/:token",element:Object(S.jsx)(re,{})}),Object(S.jsx)(C.b,{path:"/registration",element:Object(S.jsx)(ce,{})}),Object(S.jsx)(C.b,{path:"/404",element:Object(S.jsx)(oe,{})}),"*/",Object(S.jsx)(C.b,{path:"/check-email/:email",element:Object(S.jsx)(le,{})}),"*/",Object(S.jsx)(C.b,{path:"*",element:Object(S.jsx)(C.a,{to:"/login"})})]})},je=n(206),ue=n(110),be=Object(ue.a)({palette:{primary:{main:"#73926C",contrastText:"#fff"},secondary:{main:"#EDA909",contrastText:"#fff"}}});var me=function(){return Object(S.jsx)(je.a,{theme:be,children:Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(P,{}),Object(S.jsx)(de,{})]})})},he=n(78),Oe=n(109),pe={},xe=Object(he.b)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:case f:return Object(j.a)(Object(j.a)({},e),{},{email:t.email,idUser:t._id,isAuth:t.isAuth});case g:return Object(j.a)(Object(j.a)({},e),{},{user:t.data});default:return e}},forgot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(j.a)(Object(j.a)({},e),{},{IsRequestNewPasswordSent:t.IsRequestNewPasswordSent});case F:return Object(j.a)(Object(j.a)({},e),{},{message:t.message});default:return e}},newPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(j.a)(Object(j.a)({},e),{},{isNewPasswordSet:t.isPasswordSet});case ee:return Object(j.a)(Object(j.a)({},e),{},{message:t.message});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTERED":return Object(j.a)(Object(j.a)({},e),{},{isRegistered:t.isRegistered});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;return t.type,e},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(j.a)(Object(j.a)({},e),{},{status:t.status});case"APP/INITIALAZE":return Object(j.a)(Object(j.a)({},e),{},{isInitialized:t.isInitialazed});default:return Object(j.a)({},e)}}}),fe=Object(he.c)(xe,Object(he.a)(Oe.a)),ge=window.store=fe;i.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(o.a,{children:Object(S.jsx)(l.a,{store:ge,children:Object(S.jsx)(me,{})})})}),document.getElementById("root")),c()}},[[162,1,2]]]);
//# sourceMappingURL=main.68a2d9f1.chunk.js.map